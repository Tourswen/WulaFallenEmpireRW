<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  <!-- 能源炉 -->
  <ThingDef ParentName="BodyPartProstheticImperialBase">
    <defName>WULA_Energy_Furnace_Base</defName>
    <label>中央能源炉（基础）</label>
    <description>机械乌拉的核心部件之一，负责提供永不衰竭的澎湃机械动力，并代替各种内脏执行内循环的任务。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>40</Steel>
      <ComponentIndustrial>2</ComponentIndustrial>
    </costList>
    <recipeMaker>
      <researchPrerequisite>WULA_Base_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_BIO</li>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <!-- <techHediffsTags>
      <li>FieldHand</li>
    </techHediffsTags> -->
  </ThingDef>
  <ThingDef ParentName="BodyPartProstheticImperialBase">
    <defName>WULA_Energy_Furnace_Overdrive</defName>
    <label>中央能源炉-超载组件</label>
    <description>安装于能源炉的特殊改件，除了获得常驻的移动速度外，还可以短时间超载机体，获得力量上的爆发性增益。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>100</Steel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装中央能源炉超载组件</useLabel>
        <!-- <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff> -->
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Energy_Furnace_Hediff_Overdrive</hediffDef>
        <bodyPart>WULA_Energy_Furnace_Bodypart</bodyPart>
        <canUpgrade>false</canUpgrade>
        <maxSeverity>1</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Energy_Furnace_Hediff_Overdrive</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>超载组件</label>
    <description>安装于能源炉的特殊改件，除了获得常驻的移动速度外，还可以短时间超载机体，获得力量上的爆发性增益。</description>
    <isBad>false</isBad>
    <duplicationAllowed>false</duplicationAllowed>
    <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>
    <stages>
      <li>
        <statOffsets>
          <MoveSpeed>1</MoveSpeed>
        </statOffsets>
      </li>
    </stages>
    <defaultInstallPart>WULA_Energy_Furnace_Bodypart</defaultInstallPart>
    <!-- <spawnThingOnRemoved>WULA_Addons_Antenna_Base</spawnThingOnRemoved> -->
    <comps>
      <li Class="HediffCompProperties_GiveAbility">
        <abilityDefs>
          <li>WULA_Energy_Furnace_Skill_Overdrive</li>
        </abilityDefs>
      </li>
    </comps>
  </HediffDef>
  <AbilityDef>
    <defName>WULA_Energy_Furnace_Skill_Overdrive</defName>
    <label>能源炉超载</label>
    <description>立刻激活能源炉的超载能力，极大增加近战的命中率和速度，并且不会被敌人的近战减速。</description>
    <iconPath>UI/Abilities/MetalbloodInjection</iconPath>
    <cooldownTicksRange>1800</cooldownTicksRange> <!-- 30 seconds -->
    <hostile>false</hostile>
    <groupAbility>true</groupAbility>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <aiCanUse>true</aiCanUse>
    <ai_IsOffensive>true</ai_IsOffensive>
    <targetRequired>false</targetRequired>
    <statBases>
      <Ability_Duration>15</Ability_Duration>
    </statBases>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <drawAimPie>false</drawAimPie>
      <requireLineOfSight>false</requireLineOfSight>
      <nonInterruptingSelfCast>true</nonInterruptingSelfCast>
      <soundCast>Pawn_Ghoul_Frenzy</soundCast>
      <targetable>false</targetable>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>WULA_Energy_Furnace_Skill_Hediff_Overdrive</hediffDef>
        <onlyApplyToSelf>True</onlyApplyToSelf>
        <replaceExisting>true</replaceExisting>
      </li>
    </comps>
  </AbilityDef>
  <HediffDef>
    <defName>WULA_Energy_Furnace_Skill_Hediff_Overdrive</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>能源炉超载</label>
    <description>能源炉正处于超载状态，极大增加了近战的命中率、攻击速度和移动速度，并且不会被敌人的近战减速。</description>
    <everCurableByItem>false</everCurableByItem>
    <stages>
      <li>
        <statFactors>
          <MeleeCooldownFactor>0.5</MeleeCooldownFactor>
          <MeleeHitChance>1</MeleeHitChance>
          <StaggerDurationFactor>0</StaggerDurationFactor>
        </statFactors>
        <statOffsets>
          <MoveSpeed>2</MoveSpeed>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <showRemainingTime>true</showRemainingTime>
      </li>
      <li Class="HediffCompProperties_Effecter">
        <stateEffecter>GhoulFrenzy</stateEffecter>
      </li>
    </comps>
  </HediffDef>
  <ThingDef ParentName="BodyPartProstheticImperialBase">
    <defName>WULA_Energy_Furnace_Hunger</defName>
    <label>中央能源炉-偷吃组件</label>
    <description>安装于能源炉的特殊改件，通过增加能源需求变相制造满足感，以增加合成人的心情。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>100</Steel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装中央能源炉偷吃组件</useLabel>
        <!-- <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff> -->
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Energy_Furnace_Hediff_Overdrive</hediffDef>
        <bodyPart>WULA_Energy_Furnace_Bodypart</bodyPart>
        <canUpgrade>false</canUpgrade>
        <maxSeverity>1</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Energy_Furnace_Hediff_Hunger</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>偷吃插件</label>
    <description>安装于能源炉的特殊改件，通过增加能源需求变相制造满足感，以增加合成人的心情。</description>
    <isBad>false</isBad>
    <duplicationAllowed>false</duplicationAllowed>
    <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>
    <stages>
      <li>
        <hungerRateFactor>2</hungerRateFactor>
      </li>
    </stages>
    <defaultInstallPart>WULA_Energy_Furnace_Bodypart</defaultInstallPart>
    <!-- <spawnThingOnRemoved>WULA_Addons_Antenna_Base</spawnThingOnRemoved> -->
  </HediffDef>

  <!-- 天线 -->
  <ThingDef ParentName="BodyPartProstheticImperialBase">
    <defName>WULA_Addons_Antenna_Base</defName>
    <label>上行链路天线</label>
    <description>机械乌拉的核心部件之一，除了接收来自乌拉帝国人工智能网络“演算圆环”的信号外，还能兼职控制其他低级机械体。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>30</Steel>
      <ComponentIndustrial>2</ComponentIndustrial>
    </costList>
    <recipeMaker>
      <researchPrerequisite>WULA_Base_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_BIO</li>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
  </ThingDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Addons_Antenna_Hediff_Base</defName>
    <hediffClass>Hediff_Mechlink</hediffClass>
    <label>基础上线链路天线</label>
    <description>一对安装于乌拉帝国合成人脑袋两侧的天线，除了接收来自乌拉帝国人工智能网络“演算圆环”的信号外，还能兼职控制其他低级机械体。</description>
    <descriptionShort>一对安装于乌拉帝国合成人脑袋两侧的天线。</descriptionShort>
    <isBad>false</isBad>
    <duplicationAllowed>false</duplicationAllowed>
    <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>
    <stages>
      <li>
        <statOffsets>
          <MechBandwidth>-4</MechBandwidth>
          <MechControlGroups>-1</MechControlGroups>
        </statOffsets>
      </li>
    </stages>
    <defaultInstallPart>WULA_Addons_Antenna_Bodypart</defaultInstallPart>
    <!-- <spawnThingOnRemoved>WULA_Addons_Antenna_Base</spawnThingOnRemoved> -->
  </HediffDef>
  <ThingDef ParentName="MechanitorImplantCraftableBase">
    <defName>WULA_Addons_Antenna_Expansion</defName>
    <label>上行链路天线-扩容插件</label>
    <description>用于为上行链路天线进行带宽扩容的组件，支持更多的机械体带宽和机械组，以指挥更庞大的钢铁洪流。</description>
    <costList>
      <Plasteel>10</Plasteel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装上行链路天线扩容插件</useLabel>
        <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff>
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Addons_Antenna_Hediff_Expansion</hediffDef>
        <bodyPart>WULA_Addons_Antenna_Bodypart</bodyPart>
        <canUpgrade>true</canUpgrade>
        <maxSeverity>3</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef>
    <defName>WULA_Addons_Antenna_Hediff_Expansion</defName>
    <hediffClass>Hediff_Level</hediffClass>
    <label>扩容插件</label>
    <description>用于为上行链路天线进行带宽扩容的组件，支持更多的机械体带宽和机械组，以指挥更庞大的钢铁洪流。</description>
    <descriptionShort>用于为上行链路天线进行带宽扩容的组件。</descriptionShort>
    <defaultLabelColor>(0.5, 0.8, 1.0)</defaultLabelColor>
    <isBad>false</isBad>
    <priceImpact>true</priceImpact>
    <initialSeverity>1</initialSeverity> <!-- Severity is bound to level of implant -->
    <minSeverity>0</minSeverity>
    <maxSeverity>3</maxSeverity>
    <keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
    <levelIsQuantity>true</levelIsQuantity>
    <duplicationAllowed>false</duplicationAllowed>
    <stages>
      <li>
        <minSeverity>1</minSeverity>
        <statOffsets>
          <MechBandwidth>4</MechBandwidth>
          <MechControlGroups>1</MechControlGroups>
        </statOffsets>
      </li>
      <li>
        <minSeverity>2</minSeverity>
        <statOffsets>
          <MechBandwidth>8</MechBandwidth>
          <MechControlGroups>1</MechControlGroups>
        </statOffsets>
      </li>
      <li>
        <minSeverity>3</minSeverity>
        <statOffsets>
          <MechBandwidth>12</MechBandwidth>
          <MechControlGroups>2</MechControlGroups>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>
  <ThingDef ParentName="MechanitorImplantCraftableBase">
    <defName>WULA_Addons_Antenna_Repairer</defName>
    <label>上行链路天线-维修插件</label>
    <description>用于为上行链路天线添加额外维修能力的组件，可以向乌拉帝国的机械体发送特殊的信号，使其能够利用上行链路自行诊断和修复伤势，并提高维修速度。</description>
    <costList>
      <Plasteel>10</Plasteel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装上行链路天线维修插件</useLabel>
        <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff>
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Addons_Antenna_Hediff_Repairer</hediffDef>
        <bodyPart>WULA_Addons_Antenna_Bodypart</bodyPart>
        <canUpgrade>true</canUpgrade>
        <maxSeverity>3</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef>
    <defName>WULA_Addons_Antenna_Hediff_Repairer</defName>
    <hediffClass>Hediff_Level</hediffClass>
    <label>维修插件</label>
    <description>用于为上行链路天线添加额外维修能力的组件，可以向乌拉帝国的机械体发送特殊的信号，使其能够利用上行链路自行诊断和修复伤势，并提高维修速度。</description>
    <defaultLabelColor>(0.5, 0.8, 1.0)</defaultLabelColor>
    <isBad>false</isBad>
    <priceImpact>true</priceImpact>
    <initialSeverity>1</initialSeverity> <!-- Severity is bound to level of implant -->
    <minSeverity>0</minSeverity>
    <maxSeverity>3</maxSeverity>
    <keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
    <levelIsQuantity>true</levelIsQuantity>
    <duplicationAllowed>false</duplicationAllowed>
    <comps>
      <li Class="HediffCompProperties_GiveAbility">
        <abilityDefs>
          <li>RemoteRepair</li>
        </abilityDefs>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>1</minSeverity>
        <statOffsets>
          <MechRemoteRepairDistance>10</MechRemoteRepairDistance>
          <MechRepairSpeed>0.66</MechRepairSpeed>
        </statOffsets>
      </li>
      <li>
        <minSeverity>2</minSeverity>
        <statOffsets>
          <MechRemoteRepairDistance>12</MechRemoteRepairDistance>
          <MechRepairSpeed>1.3</MechRepairSpeed>
        </statOffsets>
      </li>
      <li>
        <minSeverity>3</minSeverity>
        <statOffsets>
          <MechRemoteRepairDistance>15</MechRemoteRepairDistance>
          <MechRepairSpeed>2</MechRepairSpeed>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <!-- 插件 -->

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Hand_Base</defName>
    <label>修复手部</label>
    <description>将这个合成人的手部破损修复，并恢复该部位生命值。</description>
    <jobString>正在修复手部</jobString>
    <appliedOnFixedBodyParts>
      <li>Hand</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers>
      <li>wulaspecies</li>
    </recipeUsers>
    
    <workAmount>1500</workAmount>
    <skillRequirements>
      <Medicine>3</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Base_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Arm_Base</defName>
    <label>修复臂膀</label>
    <description>将这个合成人的手部、手臂和肩部的破损修复，并恢复该部位生命值。比起修复单个部位花费，时间、资源需求和技能等级要求更高。</description>
    <jobString>正在修复手部</jobString>
    <appliedOnFixedBodyParts>
      <li>Shoulder</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers>
      <li>wulaspecies</li>
    </recipeUsers>
    
    <workAmount>3000</workAmount>
    <skillRequirements>
      <Medicine>7</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Repair_Arm_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Leg_Base</defName>
    <label>修复腿部</label>
    <description>将这个合成人的腿部和足部破损修复，并恢复这些部位的生命值。比起修复单个部位花费，时间、资源需求和技能等级要求更高。</description>
    <jobString>正在修复腿部</jobString>
    <appliedOnFixedBodyParts>
      <li>Leg</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers>
      <li>wulaspecies</li>
    </recipeUsers>
    
    <workAmount>3000</workAmount>
    <skillRequirements>
      <Medicine>7</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Repair_Arm_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Foot_Base</defName>
    <label>修复足部</label>
    <description>将这个合成人的足部破损修复，并恢复这些部位的生命值。</description>
    <jobString>正在修复足部</jobString>
    <appliedOnFixedBodyParts>
      <li>Foot</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers>
      <li>wulaspecies</li>
    </recipeUsers>
    
    <workAmount>1500</workAmount>
    <skillRequirements>
      <Medicine>3</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Base_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Head_Base</defName>
    <label>修复头部</label>
    <description>将这个合成人的头部和颈部的破损修复，并恢复这些部位的生命值。</description>
    <jobString>正在修复头部</jobString>
    <appliedOnFixedBodyParts>
      <li>Neck</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers>
      <li>wulaspecies</li>
    </recipeUsers>
    
    <workAmount>1500</workAmount>
    <skillRequirements>
      <Medicine>3</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Repair_Arm_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>ComponentIndustrial</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Torso_Base</defName>
    <label>修复全身</label>
    <description>此项修复将修复这个合成人全身损伤，并恢复所有部位生命值。比起修复单个部位花费，时间、资源需求和技能等级要求更高。</description>
    <jobString>正在修复躯干</jobString>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True"/> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers>
      <li>wulaspecies</li>
    </recipeUsers>
    
    <workAmount>7000</workAmount>
    <researchPrerequisites>
      <li>WULA_Repair_All_Technology</li>
    </researchPrerequisites>
    <skillRequirements>
      <Medicine>10</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>50</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>ComponentIndustrial</li>
          </thingDefs>
        </filter>
        <count>3</count>
      </li>
    </ingredients>
  </RecipeDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Body_Fixed</defName>
    <hediffClass>Hediff_Implant</hediffClass>
    <label>已修复</label>
    <description>这个合成人的破损已被细致地修复。</description>
    <descriptionShort>这个合成人的破损已被细致地修复。</descriptionShort>
    <isBad>false</isBad>
    <duplicationAllowed>true</duplicationAllowed>
    <keepOnBodyPartRestoration>false</keepOnBodyPartRestoration>  <!-- true -->
  </HediffDef>

  <ThingDef ParentName="ResourceBase">
    <defName>WULA_Soul_Wedge</defName>
    <label>魂楔</label>
    <description>一种通过特殊手段将生命体灵魂抽离封装得到的物品，是乌拉帝国灵能理论中“灵魂量化”的集中体现，可为各种乌拉帝国灵能法杖充能。</description>
    <graphicData>
      <texPath>Wula/Item/WULA_Soul_Wedge</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <resourceReadoutPriority>First</resourceReadoutPriority>
    <soundInteract>Silver_Drop</soundInteract>
    <soundDrop>Silver_Drop</soundDrop>
    <useHitPoints>false</useHitPoints>
    <healthAffectsPrice>false</healthAffectsPrice>
    <resourceReadoutAlwaysShow>true</resourceReadoutAlwaysShow>
    <statBases>
      <MarketValue>10</MarketValue>
      <Mass>0.001</Mass>
    </statBases>
    <stackLimit>500</stackLimit>
    <smallVolume>true</smallVolume>
    <deepCommonality>0.5</deepCommonality>
    <deepCountPerPortion>70</deepCountPerPortion>
    <deepLumpSizeRange>2~10</deepLumpSizeRange>
    <burnableByRecipe>false</burnableByRecipe>
    <smeltable>true</smeltable>
    <possessionCount>40</possessionCount>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
  </ThingDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Extract_Soul_Wedge</defName>
    <label>提取魂楔</label>
    <description>从该目标体内提取10枚魂楔以供乌拉帝国灵能法杖充能，提取魂楔很可能会杀死目标。</description>
    <jobString>正在提取魂楔</jobString>
    <workAmount>500</workAmount>
    <hideBodyPartNames>true</hideBodyPartNames>
    <targetsBodyPart>false</targetsBodyPart>
    <isViolation>true</isViolation>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <descriptionHyperlinks>
      <ThingDef>WULA_Soul_Wedge</ThingDef>
    </descriptionHyperlinks>
    <researchPrerequisites>
      <li>WULA_Synth_Psi_Technology</li>
    </researchPrerequisites>
    <uiIconThing>WULA_Soul_Wedge</uiIconThing>
    <anesthetize>false</anesthetize>
    <workSkillLearnFactor>2</workSkillLearnFactor>
    <products>
      <WULA_Soul_Wedge>10</WULA_Soul_Wedge>
    </products>

    <ingredients Inherit="False">
    </ingredients>
    <addsHediff>WULA_Extract_Soul_Wedge_Hediff</addsHediff>
  </RecipeDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Extract_Soul_Wedge_Hediff</defName>
    <hediffClass>Hediff_Implant</hediffClass>
    <label>灵魂抽离</label>
    <description>该生物的灵魂被人为的分离了。</description>
    <descriptionShort>该生物的灵魂被人为的分离了，现在这只是一具空躯壳。</descriptionShort>
    <initialSeverity>1</initialSeverity>
    <minSeverity>1</minSeverity>
    <alwaysShowSeverity>true</alwaysShowSeverity>
    <isBad>true</isBad>
    <duplicationAllowed>true</duplicationAllowed>
    <keepOnBodyPartRestoration>false</keepOnBodyPartRestoration>  <!-- true -->
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-2</offset>
          </li>
        </capMods>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.2</severityPerDay>
      </li>
    </comps>
  </HediffDef>
</Defs>