<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="BodyPartProstheticMakeableBase">
    <defName>Wula_BackstoryRegeneratorImplant</defName>
    <label>backstory regenerator</label>
    <thingClass>ThingWithComps</thingClass>
    <description>A one-use implant that restructures a person's memories and experiences, effectively giving them a new backstory. The process is unstable and the implant is consumed on use.</description>
    <statBases>
      <MarketValue>1500</MarketValue>
      <Mass>0.1</Mass>
    </statBases>
    <recipeMaker>
      <researchPrerequisite>Prosthetics</researchPrerequisite>
      <skillRequirements>
        <Crafting>8</Crafting>
      </skillRequirements>
      <recipeUsers>
        <li>FabricationBench</li>
      </recipeUsers>
    </recipeMaker>
    <costList>
      <Plasteel>50</Plasteel>
      <ComponentIndustrial>5</ComponentIndustrial>
    </costList>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>使用 {0_label}</useLabel>
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>Wula_RegenerateBackstory</hediffDef>
        <bodyPart>Brain</bodyPart>
      </li>
      <li Class="CompProperties_UseEffectDestroySelf" />
    </comps>
  </ThingDef>

  <HediffDef ParentName="ImplantHediffBase">
    <defName>Wula_RegenerateBackstory</defName>
    <label>backstory regenerator</label>
    <labelNoun>a backstory regenerator</labelNoun>
    <description>A backstory regenerator is installed.</description>
    <spawnThingOnRemoved>Wula_BackstoryRegeneratorImplant</spawnThingOnRemoved>
    <comps>
      <li Class="WulaFallenEmpire.HediffCompProperties_RegenerateBackstory">
        <spawnCategories>
          <li>Wula_Backstory_Categories</li>
        </spawnCategories>
        <regenerateChildhood>false</regenerateChildhood>
      </li>
    </comps>
  </HediffDef>

  <RecipeDef ParentName="SurgeryInstallImplantBase">
    <defName>InstallWulaBackstoryRegenerator</defName>
    <label>install backstory regenerator</label>
    <description>Installs a backstory regenerator.</description>
    <jobString>Installing backstory regenerator.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>Wula_BackstoryRegeneratorImplant</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>Wula_BackstoryRegeneratorImplant</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>Wula_RegenerateBackstory</addsHediff>
  </RecipeDef>

</Defs>
