<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  <HediffDef Name="Wula_ImplantHediffBase" Abstract="True">
    <hediffClass>Hediff_Implant</hediffClass>
    <defaultLabelColor>(0.6, 0.6, 1.0)</defaultLabelColor>
    <isBad>false</isBad>
    <priceImpact>true</priceImpact>
    <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>
    <countsAsAddedPartOrImplant>true</countsAsAddedPartOrImplant>
    <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
  </HediffDef>
  <HediffDef Name="Wula_ImplantHediffBase_T1" ParentName="Wula_ImplantHediffBase" Abstract="True">
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.05</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  <HediffDef Name="Wula_ImplantHediffBase_T2" ParentName="Wula_ImplantHediffBase" Abstract="True">
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.1</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  <HediffDef Name="Wula_ImplantHediffBase_T3" ParentName="Wula_ImplantHediffBase" Abstract="True">
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.2</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  <!-- 能源炉 -->
  <ThingDef ParentName="BodyPartProstheticMakeableBase">
    <defName>WULA_Energy_Furnace_Base</defName>
    <label>中央能源炉（基础）</label>
    <description>机械乌拉的核心部件之一，负责提供永不衰竭的澎湃机械动力，并代替各种内脏执行内循环的任务。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>40</Steel>
      <ComponentIndustrial>2</ComponentIndustrial>
    </costList>
    <recipeMaker>
      <researchPrerequisite>WULA_Base_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_BIO</li>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <!-- <techHediffsTags>
      <li>FieldHand</li>
    </techHediffsTags> -->
  </ThingDef>
  <ThingDef ParentName="BodyPartProstheticMakeableBase">
    <defName>WULA_Energy_Furnace_Overdrive</defName>
    <label>中央能源炉-超载组件</label>
    <description>安装于能源炉的特殊改件，除了获得常驻的移动速度外，还可以短时间超载机体，获得力量上的爆发性增益。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>100</Steel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装中央能源炉超载组件</useLabel>
        <!-- <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff> -->
      </li>
      <li Class="CompProperties_UseEffectDestroySelf" />
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Energy_Furnace_Hediff_Overdrive</hediffDef>
        <bodyPart>WULA_Energy_Furnace_Bodypart</bodyPart>
        <canUpgrade>false</canUpgrade>
        <maxSeverity>1</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef ParentName="Wula_ImplantHediffBase_T2">
    <defName>WULA_Energy_Furnace_Hediff_Overdrive</defName>
    <label>超载组件</label>
    <description>安装于能源炉的特殊改件，除了获得常驻的移动速度外，还可以短时间超载机体，获得力量上的爆发性增益。</description>
    <duplicationAllowed>false</duplicationAllowed>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <statOffsets>
          <MoveSpeed>1</MoveSpeed>
        </statOffsets>
      </li>
    </stages>
    <defaultInstallPart>WULA_Energy_Furnace_Bodypart</defaultInstallPart>
    <!-- <spawnThingOnRemoved>WULA_Addons_Antenna_Base</spawnThingOnRemoved> -->
    <comps>
      <li Class="HediffCompProperties_GiveAbility">
        <abilityDefs>
          <li>WULA_Energy_Furnace_Skill_Overdrive</li>
        </abilityDefs>
      </li>
    </comps>
  </HediffDef>
  <AbilityDef>
    <defName>WULA_Energy_Furnace_Skill_Overdrive</defName>
    <label>能源炉超载</label>
    <description>立刻激活能源炉的超载能力，极大增加近战的命中率和速度，并且不会被敌人的近战减速。</description>
    <iconPath>UI/Abilities/MetalbloodInjection</iconPath>
    <cooldownTicksRange>1800</cooldownTicksRange> <!-- 30 seconds -->
    <hostile>false</hostile>
    <groupAbility>true</groupAbility>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <aiCanUse>true</aiCanUse>
    <ai_IsOffensive>true</ai_IsOffensive>
    <targetRequired>false</targetRequired>
    <statBases>
      <Ability_Duration>15</Ability_Duration>
    </statBases>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <drawAimPie>false</drawAimPie>
      <requireLineOfSight>false</requireLineOfSight>
      <nonInterruptingSelfCast>true</nonInterruptingSelfCast>
      <soundCast>Pawn_Ghoul_Frenzy</soundCast>
      <targetable>false</targetable>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>WULA_Energy_Furnace_Skill_Hediff_Overdrive</hediffDef>
        <onlyApplyToSelf>True</onlyApplyToSelf>
        <replaceExisting>true</replaceExisting>
      </li>
    </comps>
  </AbilityDef>
  <HediffDef>
    <defName>WULA_Energy_Furnace_Skill_Hediff_Overdrive</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>能源炉超载</label>
    <description>能源炉正处于超载状态，极大增加了近战的命中率、攻击速度和移动速度，并且不会被伤害所减速。</description>
    <everCurableByItem>false</everCurableByItem>
    <stages>
      <li>
        <statFactors>
          <MeleeCooldownFactor>0.5</MeleeCooldownFactor>
          <MeleeHitChance>1</MeleeHitChance>
          <StaggerDurationFactor>0</StaggerDurationFactor>
        </statFactors>
        <statOffsets>
          <MoveSpeed>2</MoveSpeed>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <showRemainingTime>true</showRemainingTime>
      </li>
      <li Class="HediffCompProperties_Effecter" MayRequire="Ludeon.RimWorld.Anomaly">
        <stateEffecter>GhoulFrenzy</stateEffecter>
      </li>
    </comps>
  </HediffDef>
  <ThingDef ParentName="BodyPartProstheticMakeableBase">
    <defName>WULA_Energy_Furnace_Hunger</defName>
    <label>中央能源炉-偷吃组件</label>
    <description>安装于能源炉的特殊改件，通过增加能源需求变相制造满足感，以增加合成人的心情。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>100</Steel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装中央能源炉偷吃组件</useLabel>
        <!-- <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff> -->
      </li>
      <li Class="CompProperties_UseEffectDestroySelf" />
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Energy_Furnace_Hediff_Hunger</hediffDef>
        <bodyPart>WULA_Energy_Furnace_Bodypart</bodyPart>
        <canUpgrade>false</canUpgrade>
        <maxSeverity>1</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef ParentName="Wula_ImplantHediffBase_T2">
    <defName>WULA_Energy_Furnace_Hediff_Hunger</defName>
    <label>偷吃插件</label>
    <description>安装于能源炉的特殊改件，通过增加能源需求变相制造满足感，以增加合成人的心情。</description>
    <duplicationAllowed>false</duplicationAllowed>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <hungerRateFactor>1</hungerRateFactor>
      </li>
    </stages>
    <defaultInstallPart>WULA_Energy_Furnace_Bodypart</defaultInstallPart>
    <!-- <spawnThingOnRemoved>WULA_Addons_Antenna_Base</spawnThingOnRemoved> -->
  </HediffDef>
  <HediffDef ParentName="AddedBodyPartBase">
    <defName>WULA_Energy_Furnace_Hediff_DM_Engine</defName>
    <label>暗物质能源炉</label>
    <description>一台由暗物质作为能源驱动的合成人能源炉，拥有永不枯竭的动力，合成人安装后将不再需要充电。</description>
    <descriptionHyperlinks><ThingDef>WULA_Energy_Furnace_DM_Engine</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>WULA_Energy_Furnace_DM_Engine</spawnThingOnRemoved>
    <addedPartProps>
      <!-- <partEfficiency>1.5</partEfficiency> -->
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <stages>
      <li>
        <disablesNeeds>
          <li>WULA_Energy</li>
        </disablesNeeds>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.1</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  <ThingDef ParentName="BodyPartBionicBase">
    <defName>WULA_Energy_Furnace_DM_Engine</defName>
    <label>暗物质能源炉</label>
    <description>一台由暗物质作为能源驱动的合成人能源炉，拥有永不枯竭的动力，合成人安装后将不再需要充电。</description>
    <descriptionHyperlinks><RecipeDef>Install_WULA_Energy_Furnace_DM_Engine</RecipeDef></descriptionHyperlinks>
    <costList>
      <Steel>100</Steel>
      <ComponentSpacer>4</ComponentSpacer>
      <WULA_Dark_Matter_Item>1</WULA_Dark_Matter_Item>
    </costList>
    <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
    <recipeMaker>
      <researchPrerequisite>WULA_Synth_Addons_2_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <statBases>
      <Mass>0.3</Mass>
    </statBases>
  </ThingDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>Install_WULA_Energy_Furnace_DM_Engine</defName>
    <label>安装暗物质能源炉</label>
    <description>为合成人安装暗物质能源炉。</description>
    <descriptionHyperlinks>
      <ThingDef>WULA_Energy_Furnace_DM_Engine</ThingDef>
      <HediffDef>WULA_Energy_Furnace_Hediff_DM_Engine</HediffDef>
    </descriptionHyperlinks>
    <jobString>安装暗物质能源炉中</jobString>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <anesthetize>false</anesthetize>
    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>WULA_Energy_Furnace_DM_Engine</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>WULA_Energy_Furnace_DM_Engine</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>WULA_Energy_Furnace_Bodypart</li>
    </appliedOnFixedBodyParts>
    <addsHediff>WULA_Energy_Furnace_Hediff_DM_Engine</addsHediff>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
  </RecipeDef>

  <!-- 处理器 -->
  <HediffDef ParentName="AddedBodyPartBase">
    <defName>WULA_Energy_Furnace_Hediff_DM_CPU</defName>
    <label>暗物质处理器</label>
    <description>由填充非交互性暗物质微粒的卡西米尔共振腔构成的处理器，极大增强合成人的意识。</description>
    <descriptionHyperlinks><ThingDef>WULA_Energy_Furnace_DM_CPU</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>WULA_Energy_Furnace_DM_CPU</spawnThingOnRemoved>
    <addedPartProps>
      <!-- <partEfficiency>1.5</partEfficiency> -->
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>0.3</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  <ThingDef ParentName="BodyPartBionicBase">
    <defName>WULA_Energy_Furnace_DM_CPU</defName>
    <label>暗物质处理器</label>
    <description>由填充非交互性暗物质微粒的卡西米尔共振腔构成的处理器，用于替换过时的生物处理器，极大增强合成人的意识。</description>
   <descriptionHyperlinks><RecipeDef>Install_WULA_Energy_Furnace_DM_CPU</RecipeDef></descriptionHyperlinks>
    <costList>
      <Steel>100</Steel>
      <ComponentSpacer>8</ComponentSpacer>
      <WULA_Dark_Matter_Item>2</WULA_Dark_Matter_Item>
    </costList>
    <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
    <recipeMaker>
      <researchPrerequisite>WULA_Synth_Addons_2_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <statBases>
      <Mass>0.3</Mass>
    </statBases>
  </ThingDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>Install_WULA_Energy_Furnace_DM_CPU</defName>
    <label>安装暗物质处理器</label>
    <description>为合成人安装暗物质处理器。</description>
    <descriptionHyperlinks>
      <ThingDef>WULA_Energy_Furnace_DM_CPU</ThingDef>
      <HediffDef>WULA_Energy_Furnace_Hediff_DM_CPU</HediffDef>
    </descriptionHyperlinks>
    <jobString>安装暗物质处理器中</jobString>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <anesthetize>false</anesthetize>
    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>WULA_Energy_Furnace_DM_CPU</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>WULA_Energy_Furnace_DM_CPU</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>WULA_Energy_Furnace_Hediff_DM_CPU</addsHediff>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
  </RecipeDef>

  <!-- 骨架 -->
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Skeleton_Hediff_Neutronium</defName>
    <label>零素骨架</label>
    <hediffClass>Hediff_Implant</hediffClass>
    <description>利用暗物质压缩而成的内嵌式中子装甲层和结构层，植入机械乌拉的体内时将使得她们获得强大的防御力。</description>
    <descriptionHyperlinks><ThingDef>WULA_Skeleton_Neutronium</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>WULA_Skeleton_Neutronium</spawnThingOnRemoved>
    <addedPartProps>
      <!-- <partEfficiency>1.5</partEfficiency> -->
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <stages>
      <li>
        <statOffsets>
          <!-- 有自带护甲，对热量伤害有高抵抗 -->
          <ArmorRating_Sharp>0.5</ArmorRating_Sharp>
          <ArmorRating_Blunt>0.5</ArmorRating_Blunt>
          <ArmorRating_Heat>0.5</ArmorRating_Heat>
          <IncomingDamageFactor>-0.3</IncomingDamageFactor>
        </statOffsets>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.1</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  <ThingDef ParentName="BodyPartBionicBase">
    <defName>WULA_Skeleton_Neutronium</defName>
    <label>零素骨架</label>
    <description>利用暗物质压缩而成的内嵌式中子装甲层和结构层，植入机械乌拉的体内时将使得她们获得强大的防御力。</description>
   <descriptionHyperlinks><RecipeDef>Install_WULA_Energy_Furnace_DM_Engine</RecipeDef></descriptionHyperlinks>
    <costList>
      <Plasteel>100</Plasteel>
      <WULA_Dark_Matter_Item>2</WULA_Dark_Matter_Item>
    </costList>
    <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
    <recipeMaker>
      <researchPrerequisite>WULA_Synth_Addons_2_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <statBases>
      <Mass>0.3</Mass>
    </statBases>
  </ThingDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>Install_WULA_Skeleton_Neutronium</defName>
    <label>安装零素骨架</label>
    <description>为合成人安装零素骨架。</description>
    <descriptionHyperlinks>
      <ThingDef>WULA_Skeleton_Neutronium</ThingDef>
      <HediffDef>WULA_Skeleton_Hediff_Neutronium</HediffDef>
    </descriptionHyperlinks>
    <jobString>安装零素骨架中</jobString>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <anesthetize>false</anesthetize>
    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>WULA_Skeleton_Neutronium</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>WULA_Skeleton_Neutronium</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    <addsHediff>WULA_Skeleton_Hediff_Neutronium</addsHediff>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
  </RecipeDef>

  <!-- 天线 -->
  <ThingDef ParentName="BodyPartProstheticMakeableBase">
    <defName>WULA_Addons_Antenna_Base</defName>
    <label>上行链路天线</label>
    <description>机械乌拉的核心部件之一，除了接收来自乌拉帝国人工智能网络“演算圆环”的信号外，还能兼职控制其他低级机械体。</description>
    <!-- <descriptionHyperlinks><RecipeDef>InstallFieldHand</RecipeDef></descriptionHyperlinks> -->
    <!-- <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags> -->
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <costList>
      <Steel>30</Steel>
      <ComponentIndustrial>2</ComponentIndustrial>
    </costList>
    <recipeMaker>
      <researchPrerequisite>WULA_Base_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_BIO</li>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
  </ThingDef>
   <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Addons_Antenna_Hediff_Base</defName>
    <hediffClass>Hediff_Mechlink</hediffClass>
    <label>基础上线链路天线</label>
    <description>一对安装于乌拉帝国合成人脑袋两侧的天线，除了接收来自乌拉帝国人工智能网络“演算圆环”的信号外，还能兼职控制其他低级机械体。</description>
    <descriptionShort>一对安装于乌拉帝国合成人脑袋两侧的天线。</descriptionShort>
    <isBad>false</isBad>
    <duplicationAllowed>false</duplicationAllowed>
    <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>
    <stages>
      <li>
        <statOffsets>
          <MechBandwidth>2</MechBandwidth>
          <MechControlGroups>1</MechControlGroups>
        </statOffsets>
      </li>
    </stages>
    <defaultInstallPart>WULA_Addons_Antenna_Bodypart</defaultInstallPart>
    <!-- <spawnThingOnRemoved>WULA_Addons_Antenna_Base</spawnThingOnRemoved> -->
    <comps>
      <li Class="WulaFallenEmpire.HediffCompProperties_MakesMechanitor"/>
    </comps>
  </HediffDef>
  <ThingDef ParentName="MechanitorImplantCraftableBase">
    <defName>WULA_Addons_Antenna_Expansion</defName>
    <label>上行链路天线-扩容插件</label>
    <description>用于为上行链路天线进行带宽扩容的组件，支持更多的机械体带宽和机械组，以指挥更庞大的钢铁洪流。</description>
    <costList>
      <Plasteel>10</Plasteel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装上行链路天线扩容插件</useLabel>
        <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff>
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Addons_Antenna_Hediff_Expansion</hediffDef>
        <bodyPart>WULA_Addons_Antenna_Bodypart</bodyPart>
        <canUpgrade>true</canUpgrade>
        <maxSeverity>3</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef ParentName="Wula_ImplantHediffBase_T1">
    <defName>WULA_Addons_Antenna_Hediff_Expansion</defName>
    <hediffClass>Hediff_Level</hediffClass>
    <label>扩容插件</label>
    <description>用于为上行链路天线进行带宽扩容的组件，支持更多的机械体带宽和机械组，以指挥更庞大的钢铁洪流。</description>
    <descriptionShort>用于为上行链路天线进行带宽扩容的组件。</descriptionShort>
    <defaultLabelColor>(0.5, 0.8, 1.0)</defaultLabelColor>
    <isBad>false</isBad>
    <priceImpact>true</priceImpact>
    <initialSeverity>1</initialSeverity> <!-- Severity is bound to level of implant -->
    <minSeverity>0</minSeverity>
    <maxSeverity>3</maxSeverity>
    <keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
    <levelIsQuantity>true</levelIsQuantity>
    <duplicationAllowed>false</duplicationAllowed>
    <stages>
      <li>
        <minSeverity>1</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.01</offset>
          </li>
        </capMods>
        <statOffsets>
          <MechBandwidth>4</MechBandwidth>
          <MechControlGroups>1</MechControlGroups>
        </statOffsets>
      </li>
      <li>
        <minSeverity>2</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.03</offset>
          </li>
        </capMods>
        <statOffsets>
          <MechBandwidth>8</MechBandwidth>
          <MechControlGroups>1</MechControlGroups>
        </statOffsets>
      </li>
      <li>
        <minSeverity>3</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.05</offset>
          </li>
        </capMods>
        <statOffsets>
          <MechBandwidth>12</MechBandwidth>
          <MechControlGroups>2</MechControlGroups>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>
  <ThingDef ParentName="MechanitorImplantCraftableBase">
    <defName>WULA_Addons_Antenna_Repairer</defName>
    <label>上行链路天线-维修插件</label>
    <description>用于为上行链路天线添加额外维修能力的组件，可以向乌拉帝国的机械体发送特殊的信号，使其能够利用上行链路自行诊断和修复伤势，并提高维修速度。</description>
    <costList>
      <Plasteel>10</Plasteel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <recipeMaker Inherit="False">
      <researchPrerequisite>WULA_Synth_Addons_Technology</researchPrerequisite>
      <recipeUsers>
        <li>WULA_Cube_Productor_Energy</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>安装上行链路天线维修插件</useLabel>
        <userMustHaveHediff>WULA_Addons_Antenna_Hediff_Base</userMustHaveHediff>
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <hediffDef>WULA_Addons_Antenna_Hediff_Repairer</hediffDef>
        <bodyPart>WULA_Addons_Antenna_Bodypart</bodyPart>
        <canUpgrade>true</canUpgrade>
        <maxSeverity>3</maxSeverity>
      </li>
    </comps>
  </ThingDef>
  <HediffDef ParentName="Wula_ImplantHediffBase_T1">
    <defName>WULA_Addons_Antenna_Hediff_Repairer</defName>
    <hediffClass>Hediff_Level</hediffClass>
    <label>维修插件</label>
    <description>用于为上行链路天线添加额外维修能力的组件，可以向乌拉帝国的机械体发送特殊的信号，使其能够利用上行链路自行诊断和修复伤势，并提高维修速度。</description>
    <defaultLabelColor>(0.5, 0.8, 1.0)</defaultLabelColor>
    <isBad>false</isBad>
    <priceImpact>true</priceImpact>
    <initialSeverity>1</initialSeverity> <!-- Severity is bound to level of implant -->
    <minSeverity>0</minSeverity>
    <maxSeverity>3</maxSeverity>
    <keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
    <levelIsQuantity>true</levelIsQuantity>
    <duplicationAllowed>false</duplicationAllowed>
    <comps>
      <li Class="HediffCompProperties_GiveAbility">
        <abilityDefs>
          <li>RemoteRepair</li>
        </abilityDefs>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>1</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.01</offset>
          </li>
        </capMods>
        <statOffsets>
          <MechRemoteRepairDistance>10</MechRemoteRepairDistance>
          <MechRepairSpeed>0.66</MechRepairSpeed>
        </statOffsets>
      </li>
      <li>
        <minSeverity>2</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.03</offset>
          </li>
        </capMods>
        <statOffsets>
          <MechRemoteRepairDistance>12</MechRemoteRepairDistance>
          <MechRepairSpeed>1.3</MechRepairSpeed>
        </statOffsets>
      </li>
      <li>
        <minSeverity>3</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.05</offset>
          </li>
        </capMods>
        <statOffsets>
          <MechRemoteRepairDistance>15</MechRemoteRepairDistance>
          <MechRepairSpeed>2</MechRepairSpeed>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <!-- 插件 -->
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Hand_Base</defName>
    <label>修复手部</label>
    <description>将这个合成人的手部破损修复，并恢复该部位生命值。</description>
    <jobString>正在修复手部</jobString>
    <appliedOnFixedBodyParts>
      <li>Hand</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    
    <workAmount>1500</workAmount>
    <skillRequirements>
      <Medicine>3</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Base_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Arm_Base</defName>
    <label>修复臂膀</label>
    <description>将这个合成人的手部、手臂和肩部的破损修复，并恢复该部位生命值。比起修复单个部位花费，时间、资源需求和技能等级要求更高。</description>
    <jobString>正在修复手部</jobString>
    <appliedOnFixedBodyParts>
      <li>Shoulder</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    
    <workAmount>3000</workAmount>
    <skillRequirements>
      <Medicine>7</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Repair_Arm_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Leg_Base</defName>
    <label>修复腿部</label>
    <description>将这个合成人的腿部和足部破损修复，并恢复这些部位的生命值。比起修复单个部位花费，时间、资源需求和技能等级要求更高。</description>
    <jobString>正在修复腿部</jobString>
    <appliedOnFixedBodyParts>
      <li>Leg</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    
    <workAmount>3000</workAmount>
    <skillRequirements>
      <Medicine>7</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Repair_Arm_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Foot_Base</defName>
    <label>修复足部</label>
    <description>将这个合成人的足部破损修复，并恢复这些部位的生命值。</description>
    <jobString>正在修复足部</jobString>
    <appliedOnFixedBodyParts>
      <li>Foot</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    
    <workAmount>1500</workAmount>
    <skillRequirements>
      <Medicine>3</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Base_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Head_Base</defName>
    <label>修复头部</label>
    <description>将这个合成人的头部和颈部的破损修复，并恢复这些部位的生命值。</description>
    <jobString>正在修复头部</jobString>
    <appliedOnFixedBodyParts>
      <li>Neck</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    
    <workAmount>1500</workAmount>
    <skillRequirements>
      <Medicine>3</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>
    <researchPrerequisites>
      <li>WULA_Repair_Arm_Technology</li>
    </researchPrerequisites>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>ComponentIndustrial</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
  </RecipeDef>
  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Fix_Torso_Base</defName>
    <label>修复全身</label>
    <description>此项修复将修复这个合成人全身损伤，并恢复所有部位生命值。比起修复单个部位花费，时间、资源需求和技能等级要求更高。</description>
    <jobString>正在修复躯干</jobString>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <uiIconThing>Steel</uiIconThing>
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True"/> <!-- Always succeeds -->
    <addsHediff>WULA_Body_Fixed</addsHediff>
    <recipeUsers Inherit="False">
      <li>WulaSpecies</li>
    </recipeUsers>
    
    <workAmount>7000</workAmount>
    <researchPrerequisites>
      <li>WULA_Repair_All_Technology</li>
    </researchPrerequisites>
    <skillRequirements>
      <Medicine>10</Medicine>
    </skillRequirements>
    <workSkill>Medicine</workSkill>
    <effectWorking>Smith</effectWorking>
    <soundWorking>Recipe_Smith</soundWorking>
    <workSpeedStat>MedicalOperationSpeed</workSpeedStat>

    <ingredients Inherit="False">
      <li>
        <filter>
          <thingDefs>
            <li>Steel</li>
          </thingDefs>
        </filter>
        <count>50</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>ComponentIndustrial</li>
          </thingDefs>
        </filter>
        <count>3</count>
      </li>
    </ingredients>
  </RecipeDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Body_Fixed</defName>
    <hediffClass>Hediff_Implant</hediffClass>
    <label>已修复</label>
    <description>这个合成人的破损已被细致地修复。</description>
    <descriptionShort>这个合成人的破损已被细致地修复。</descriptionShort>
    <isBad>false</isBad>
    <duplicationAllowed>true</duplicationAllowed>
    <keepOnBodyPartRestoration>false</keepOnBodyPartRestoration>  <!-- true -->
    <comps>
      <li Class="HediffCompProperties_ChanceToRemove">
        <intervalTicks>1</intervalTicks>
        <chance>1</chance>
      </li>
    </comps>
  </HediffDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>WULA_Extract_Soul_Wedge</defName>
    <label>提取魂楔</label>
    <description>从该目标体内提取50枚魂楔以供乌拉帝国灵能法杖充能，被提取灵魂的目标将进入灵魂抽离状态，在这种状态下，目标不稳定的灵魂每过一段时间都可能导致目标无法行动、陷入昏迷甚至是直接死亡——这种症状没有固定的治愈时间，但是每天都将有一定几率自动消失，届时可再次开展提取手术。</description>
    <jobString>正在提取魂楔</jobString>
    <workAmount>500</workAmount>
    <workerClass>Recipe_AddHediff</workerClass>
    <hideBodyPartNames>true</hideBodyPartNames>
    <targetsBodyPart>false</targetsBodyPart>
    <isViolation>true</isViolation>
    <descriptionHyperlinks>
      <ThingDef>WULA_Soul_Wedge</ThingDef>
    </descriptionHyperlinks>
    <researchPrerequisites>
      <li>WULA_Synth_Psi_Technology</li>
    </researchPrerequisites>
    <uiIconThing>WULA_Soul_Wedge</uiIconThing>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <anesthetize>false</anesthetize>
    <workSkillLearnFactor>2</workSkillLearnFactor>
    <products>
      <WULA_Soul_Wedge>50</WULA_Soul_Wedge>
    </products>

    <ingredients Inherit="False">
    </ingredients>
    <addsHediff>WULA_Extract_Soul_Wedge_Hediff</addsHediff>
  </RecipeDef>
  <HediffDef ParentName="ImplantHediffBase">
    <defName>WULA_Extract_Soul_Wedge_Hediff</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>灵魂抽离</label>
    <description>该生物的灵魂被人为的分离了。</description>
    <descriptionShort>该生物的灵魂被人为的分离了，在这种状态下，目标不稳定的灵魂每过一段时间都可能导致目标无法行动、陷入昏迷甚至是直接死亡——这种症状没有固定的治愈时间，但是每天都将有一定几率自动消失，届时可再次开展提取手术。</descriptionShort>
    <!-- <initialSeverity>0.5</initialSeverity> -->
    <minSeverity>0.01</minSeverity>
    <maxSeverity>1</maxSeverity>
    <alwaysShowSeverity>true</alwaysShowSeverity>
    <isBad>true</isBad>
    <duplicationAllowed>true</duplicationAllowed>
    <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>  <!-- true -->
    <defaultInstallPart>Brain</defaultInstallPart>
    <comps>
      <li Class="HediffCompProperties_ChanceToRemove">
        <intervalTicks>60000</intervalTicks>
        <chance>0.5</chance>
      </li>
      <li Class="HediffCompProperties_RandomizeStageWithInterval">
        <ticksToRandomize>60000</ticksToRandomize>
        <notifyMessage>{PAWN_labelShort} 的灵魂状态从 {1} 转变为 {2}.</notifyMessage>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
    <stages>
      <li>
        <label>残缺</label>
        <minSeverity>0.01</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <setMax>0.5</setMax>
          </li>
        </capMods>
      </li>
      <li>
        <label>破碎</label>
        <minSeverity>0.3</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <setMax>0.1</setMax>
          </li>
        </capMods>
      </li>
      <li>
        <label>弥散</label>
        <minSeverity>0.9</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <setMax>0</setMax>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
</Defs>
